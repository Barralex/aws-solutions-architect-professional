# 8.5 Aurora - Advanced

## Aurora Serverless

- Auto-scaling basado en uso
- Pay per second
- Para: workloads impredecibles, intermitentes

```
Client → Proxy Fleet (managed) → Aurora Serverless (escala solo)
```

## Data API (sin conexión JDBC)

```
App ──→ HTTPS API ──→ Aurora Serverless
              │
              └──→ Secrets Manager (auth)

- NO necesitás manejar conexiones
- SQL via HTTP
- IAM auth + Secrets Manager
```

## RDS Proxy para Aurora

```
Writes:  Lambda → RDS Proxy → Primary Instance
Reads:   Lambda → RDS Proxy (read-only) → Read Replicas
```

## Aurora Global Database (CAE EN EXAMEN)

```
Primary Region (us-east-1)         Secondary Regions (hasta 10)
      │                                    │
   Reads/Writes                        Read-only
      │                                    │
      └────── replication <1 seg ──────────┘
```

| Métrica | Valor |
|---------|-------|
| Secondary regions | Hasta 10 |
| Replicas por region | Hasta 16 |
| Replication lag | < 1 segundo |
| RTO (promote region) | < 1 minuto |

## Write Forwarding

```
Usuario en eu-west-1 hace WRITE
         │
         ▼
Secondary (eu-west-1) ──forward──→ Primary (us-east-1)
         │                                  │
         └────── replication ◄──────────────┘
```

**Por qué:** Menos endpoints que manejar. App conecta a región local y listo.

## Migrar RDS → Aurora

| Método | Downtime | Cuándo usar |
|--------|----------|-------------|
| Snapshot → Restore | Sí (mientras migras) | DB chica, downtime OK |
| Aurora Read Replica → Promote | Mínimo | DB grande, zero downtime |

```
Opción 1: RDS → Snapshot → Aurora (downtime)

Opción 2: RDS → Aurora Read Replica → Promote (sin downtime)
                     (esperar lag ≈ 0)
```

## Para el examen

| Ves en pregunta | Respuesta |
|-----------------|-----------|
| Workload impredecible + Aurora | Aurora Serverless |
| Aurora sin JDBC/conexiones | Data API |
| Multi-region Aurora <1s lag | Aurora Global Database |
| RTO <1 min failover regional | Aurora Global Database |
| Write desde secondary region | Write Forwarding |
| Migrar RDS→Aurora sin downtime | Aurora Read Replica → Promote |
| Lambda + Aurora connections | RDS Proxy |
