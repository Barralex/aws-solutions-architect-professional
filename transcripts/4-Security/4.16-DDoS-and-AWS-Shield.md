# 4.16 DDoS and AWS Shield

**Curso:** AWS Solutions Architect Professional (SAP-C02)
**Sección:** 4 - Security
**Duración:** 6 min

---

## Resumen

DDoS = atacantes saturan tu servidor con requests hasta que muere. AWS te protege con Shield (Standard gratis, Advanced $3K/mes), WAF para filtrar requests, CloudFront/Route 53 en el edge, y Auto Scaling para absorber tráfico.

---

## Tipos de ataques DDoS

| Ataque | Capa | Qué hace |
|--------|------|----------|
| **SYN Flood** | L4 | Demasiadas conexiones TCP |
| **UDP Reflection** | L4 | Servidores externos envían UDP masivo |
| **DNS Flood** | L4 | Saturan DNS, users no resuelven tu dominio |
| **Slow Loris** | L7 | Muchas conexiones HTTP abiertas y mantenidas |
| **Application Level** | L7 | Explotan bugs específicos de tu app |

---

## Protecciones en AWS

```
┌─────────────────────────────────────────────────────────────┐
│  CAPA DE PROTECCIÓN                                         │
│                                                             │
│  1. SHIELD STANDARD (gratis, ON por default)               │
│     • Protege contra SYN Flood, UDP, Reflection            │
│     • Layer 3/4                                            │
│                                                             │
│  2. SHIELD ADVANCED ($3,000/mes por org)                   │
│     • Ataques más sofisticados                             │
│     • 24/7 DDoS Response Team (DRT)                        │
│     • Protección contra costos extra por scaling           │
│     • EC2, ELB, CloudFront, Global Accelerator, Route 53   │
│                                                             │
│  3. WAF (Web Application Firewall)                         │
│     • Filtra requests por reglas (tamaño, patrones)        │
│     • Layer 7 (application level)                          │
│                                                             │
│  4. CloudFront + Route 53                                  │
│     • Shield habilitado por default                        │
│     • Tráfico se filtra en el EDGE (no llega a tu región)  │
│                                                             │
│  5. Auto Scaling                                           │
│     • Si llega tráfico, escala para absorberlo             │
│     • Más caro para vos, pero sobrevivís                   │
└─────────────────────────────────────────────────────────────┘
```

---

## Arquitectura de protección

```
┌─────────────────────────────────────────────────────────────┐
│                                                             │
│  Atacantes                                                  │
│      │                                                      │
│      ▼                                                      │
│  ┌────────────┐                                            │
│  │ Route 53   │ ◄── Shield Standard (default)              │
│  └─────┬──────┘                                            │
│        ▼                                                    │
│  ┌────────────┐                                            │
│  │ CloudFront │ ◄── Shield + WAF                           │
│  └─────┬──────┘     (edge, no llega a tu región)           │
│        ▼                                                    │
│  ┌────────────┐                                            │
│  │    ALB     │ ◄── Shield                                 │
│  └─────┬──────┘                                            │
│        ▼                                                    │
│  ┌────────────┐                                            │
│  │ Auto Scale │ ◄── Escala si pasa tráfico                 │
│  │    EC2     │                                            │
│  └────────────┘                                            │
│                                                             │
│  Cada capa filtra, poco llega al final                     │
└─────────────────────────────────────────────────────────────┘
```

---

## Shield Standard vs Advanced

| Feature | Standard | Advanced |
|---------|----------|----------|
| **Costo** | Gratis | $3,000/mes/org |
| **Activación** | Default ON | Opt-in |
| **Protección** | L3/L4 básica | L3/L4/L7 sofisticada |
| **DDoS Response Team** | ❌ | ✅ 24/7 |
| **Cost protection** | ❌ | ✅ (no pagas scaling extra) |
| **Servicios** | Todos | EC2, ELB, CloudFront, GA, R53 |

---

## Puntos Clave para el Examen

1. **Shield Standard** = gratis, ON por default, L3/L4
2. **Shield Advanced** = $3K/mes, 24/7 DRT, cost protection
3. **WAF** = Layer 7, filtra por reglas (no es anti-DDoS específico)
4. **CloudFront + Route 53** = Shield en el edge
5. **"Cost protection during DDoS"** = Shield Advanced

