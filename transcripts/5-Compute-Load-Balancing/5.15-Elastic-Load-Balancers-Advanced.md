# 5.15 Elastic Load Balancers - Advanced

## Conceptos Clave

### 1. Cross-Zone Load Balancing
- **Enabled:** Distribuye tráfico uniformemente entre TODAS las instancias de TODAS las AZs
- **Disabled:** Tráfico se queda dentro de cada AZ (puede causar desbalance)

### 2. Cross-Zone por tipo de LB
| Load Balancer | Default | Costo Inter-AZ |
|---------------|---------|----------------|
| CLB | Disabled | Sin costo |
| ALB | **Always ON** | Sin costo |
| NLB | Disabled | **Con costo** |
| GWLB | Disabled | **Con costo** |

### 3. Sticky Sessions (Session Affinity)
- Cliente siempre va a la misma instancia
- Usa cookies con fecha de expiración
- Disponible: CLB y ALB
- Riesgo: Puede causar desbalance de carga

### 4. Routing Algorithms

**Least Outstanding Request (ALB, CLB):**
- Va a la instancia con menos requests pendientes
- La menos ocupada recibe el siguiente request

**Round Robin (ALB, CLB):**
- Rotación simple: 1 → 2 → 3 → 1 → 2 → 3...
- No considera carga actual

**Flow Hash (NLB only):**
- Hash de: protocolo + IPs + puertos + TCP sequence
- Misma conexión TCP/UDP → misma instancia
- Equivalente a sticky sessions para NLB

## Para el Examen
- ALB: Cross-Zone SIEMPRE ON, sin costo
- NLB/GWLB: Cross-Zone tiene COSTO
- Sticky Sessions = cookies = posible desbalance
- NLB no usa cookies, usa Flow Hash
