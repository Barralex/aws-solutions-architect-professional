# 9.4 SNS (Simple Notification Service)

## Qué es

- Servicio de **Pub/Sub** (Publish/Subscribe)
- Un mensaje → muchos receptores
- Event producer publica en un **topic**
- Subscribers reciben todos los mensajes (o filtrados)

## Por qué existe

```
SIN SNS (integración directa):
   Buying Service → Email
                  → Fraud Service
                  → Shipping Service
                  → SQS Queue

   Agregar nuevo servicio = cambiar código

CON SNS (Pub/Sub):
   Buying Service → SNS Topic → Todos los subscribers

   Agregar nuevo servicio = agregar subscriber (sin cambiar código)
```

## Límites

- **12,500,000+** subscriptions por topic
- **100,000** topics por cuenta
- (No te preguntan límites exactos en el examen)

## Tipos de Subscribers

- Email / SMS
- HTTP / HTTPS endpoints
- **SQS** (fan-out pattern)
- **Lambda**
- **Kinesis Data Firehose** (→ S3, Redshift)

## Servicios que publican a SNS

- CloudWatch Alarms
- Auto Scaling Group notifications
- CloudFormation state changes
- S3 bucket events
- Budgets
- DMS, Lambda, DynamoDB, RDS events

## Cómo publicar

1. **Topic Publish (SDK):** Create topic → Create subscriptions → Publish
2. **Direct Publish (Mobile):** Platform application → Platform endpoint → GCM/APNS/ADM

## Seguridad (igual que SQS)

- In-flight encryption (default)
- At-rest encryption (KMS)
- Client-side encryption (responsabilidad del cliente)
- IAM policies para APIs
- SNS Access Policies (como S3 bucket policies):
  - Cross-account access
  - Permitir otros servicios (ej: S3 → SNS)

## Para el examen

| Ves en pregunta | Respuesta |
|-----------------|-----------|
| Un mensaje → muchos receptores | SNS |
| Notificar múltiples servicios | SNS topic |
| Decouple sin saber subscribers | SNS (Pub/Sub) |
| S3 events a múltiples destinos | SNS |
| Cross-account notifications | SNS Access Policy |
