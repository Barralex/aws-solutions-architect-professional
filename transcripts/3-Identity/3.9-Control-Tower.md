# 3.9 AWS Control Tower

## Resumen
AWS Control Tower es una forma sencilla de configurar y gestionar entornos AWS multi-cuenta seguros y conformes con las mejores prácticas. Automatiza la creación de cuentas y aplica guardrails (barandillas) para gobernanza continua.

---

## Conceptos Clave

### 1. ¿Qué es Control Tower?

**Una capa encima de Organizations que automatiza:**
- Configuración de entorno multi-cuenta en pocos clicks
- Gestión de políticas usando guardrails
- Detección y remediación automática de violaciones
- Dashboard de cumplimiento interactivo

```
┌─────────────────────────────────────────────────────────────┐
│                   CONTROL TOWER                              │
│                                                             │
│  Automatiza:                                                │
│  ┌─────────────────┐  ┌─────────────────┐                  │
│  │ Crear cuentas   │  │ Aplicar SCPs    │                  │
│  │ (Account        │  │ automáticamente │                  │
│  │  Factory)       │  │                 │                  │
│  └─────────────────┘  └─────────────────┘                  │
│                                                             │
│  ┌─────────────────┐  ┌─────────────────┐                  │
│  │ Landing Zone    │  │ Dashboard de    │                  │
│  │ (estructura     │  │ compliance      │                  │
│  │  base)          │  │                 │                  │
│  └─────────────────┘  └─────────────────┘                  │
│                                                             │
│  Corre ENCIMA de AWS Organizations                         │
└─────────────────────────────────────────────────────────────┘
```

### 2. Account Factory

**¿Qué hace?**
- Automatiza el aprovisionamiento de cuentas nuevas
- Crea cuentas con configuración pre-aprobada (baseline)
- Configura automáticamente: VPC, subnets, regiones

**Usa internamente:** AWS Service Catalog para provisionar las cuentas.

```
┌─────────────────────────────────────────────────────────────┐
│                   ACCOUNT FACTORY                            │
│                                                             │
│  Nueva cuenta → Se crea con:                                │
│                                                             │
│  ✓ VPC configurada según estándares                        │
│  ✓ Subnets predefinidas                                    │
│  ✓ Regiones permitidas                                      │
│  ✓ SCPs aplicados                                          │
│  ✓ Integración con IAM Identity Center                     │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 3. Landing Zone

La Landing Zone es el entorno multi-cuenta bien configurado que crea Control Tower.

**Ejemplo de integración con AD corporativo:**

```
┌──────────────────┐         VPN/DX         ┌──────────────────┐
│  Data Center     │ ◄────────────────────► │  AWS Cloud       │
│                  │                        │                  │
│  ┌────────────┐  │                        │  ┌────────────┐  │
│  │ Active     │  │   Two-way Trust        │  │ AWS        │  │
│  │ Directory  │ ◄─────────────────────────┤► │ Managed AD │  │
│  │ (ADFS)     │  │                        │  └─────┬──────┘  │
│  └────────────┘  │                        │        │         │
│                  │                        │        ▼         │
│                  │                        │  ┌────────────┐  │
│                  │                        │  │ IAM        │  │
│                  │                        │  │ Identity   │  │
│                  │                        │  │ Center     │  │
│                  │                        │  └─────┬──────┘  │
│                  │                        │        │         │
│                  │                        │        ▼         │
│                  │                        │  ┌────────────┐  │
│                  │                        │  │ Cuentas de │  │
│                  │                        │  │ Landing    │  │
│                  │                        │  │ Zone       │  │
│                  │                        │  └────────────┘  │
└──────────────────┘                        └──────────────────┘
```

### 4. Guardrails (Barandillas)

Los guardrails proveen gobernanza continua para detectar y remediar violaciones.

**Dos tipos:**

| Tipo | Cómo funciona | Ejemplo |
|------|---------------|---------|
| **Preventive** | Usa SCPs para BLOQUEAR acciones | No permitir crear access keys del root user |
| **Detective** | Usa AWS Config para DETECTAR problemas | Detectar si MFA no está habilitado en root |

```
┌─────────────────────────────────────────────────────────────┐
│  GUARDRAIL DETECTIVE - EJEMPLO                              │
│                                                             │
│  ┌─────────────┐    Detecta      ┌─────────────┐           │
│  │ AWS Config  │ ──────────────► │ Recurso sin │           │
│  │ (detective) │   incumplimiento│   tags      │           │
│  └──────┬──────┘                 └─────────────┘           │
│         │                                                   │
│         ▼                                                   │
│  ┌─────────────┐    Notifica     ┌─────────────┐           │
│  │ SNS Topic   │ ──────────────► │ Admin       │           │
│  └──────┬──────┘                 └─────────────┘           │
│         │                                                   │
│         ▼                                                   │
│  ┌─────────────┐    Remedia      ┌─────────────┐           │
│  │ Lambda      │ ──────────────► │ Agrega tag  │           │
│  └─────────────┘                 └─────────────┘           │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 5. Niveles de Guardrails

| Nivel | Descripción |
|-------|-------------|
| **Mandatory** | Activados automáticamente por Control Tower. No puedes desactivarlos. Ej: Prohibir acceso público a bucket de logs |
| **Strongly Recommended** | Basados en mejores prácticas de AWS. Opcionales. Ej: Encriptar volúmenes EBS |
| **Elective** | Para casos específicos de empresas. Opcionales. Ej: No permitir delete sin MFA en S3 |

---

## Para el Examen

1. **Control Tower** = automatiza setup de entornos multi-cuenta con best practices
2. **Account Factory** = crea cuentas con configuración pre-aprobada (usa Service Catalog)
3. **Landing Zone** = el entorno multi-cuenta que crea Control Tower
4. **Guardrails Preventivos** = usan SCPs para bloquear
5. **Guardrails Detectivos** = usan AWS Config para detectar
6. **Guardrails Mandatory** = siempre activos, no se pueden desactivar
7. **Control Tower corre ENCIMA de Organizations** (no lo reemplaza)

---

## Cuándo usar Control Tower vs Organizations solo

| Situación | Solución |
|-----------|----------|
| Quiero máximo control manual | Organizations solo |
| Quiero automatización de best practices | Control Tower |
| Startup con pocas cuentas | Organizations puede bastar |
| Enterprise con muchas cuentas y compliance | Control Tower |

---

*Siguiente: 3.10 AWS Resource Access Manager (RAM)*
