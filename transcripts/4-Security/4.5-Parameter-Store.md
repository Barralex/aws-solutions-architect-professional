# 4.5 SSM Parameter Store

**Curso:** AWS Solutions Architect Professional (SAP-C02)
**Sección:** 4 - Security
**Duración:** 4 min

---

## Resumen

SSM Parameter Store es almacenamiento seguro para configuraciones y secretos. Es serverless, escalable, con versionado automático. Puede encriptar con KMS opcionalmente.

---

## 1. Qué es Parameter Store

```
┌─────────────────────────────────────────────────────────────┐
│  SSM PARAMETER STORE                                        │
│                                                             │
│  Almacenamiento seguro para:                               │
│  • Configuraciones (plain text)                            │
│  • Secretos (encriptados con KMS)                          │
│                                                             │
│  Características:                                           │
│  • Serverless, escalable, durable                          │
│  • Version tracking automático                             │
│  • Seguridad via IAM                                       │
│  • Notificaciones con EventBridge                          │
│  • Integración con CloudFormation                          │
└─────────────────────────────────────────────────────────────┘
```

### Flujo básico

```
┌─────────────────────────────────────────────────────────────┐
│                                                             │
│  App (EC2/Lambda)                                          │
│       │                                                     │
│       │ GetParameter API                                    │
│       ▼                                                     │
│  ┌──────────────┐                                          │
│  │  IAM Check   │ ← Verifica permisos                      │
│  └──────┬───────┘                                          │
│         │                                                   │
│         ▼                                                   │
│  ┌──────────────┐     ┌──────────────┐                     │
│  │  Parameter   │────►│     KMS      │ (si está encriptado)│
│  │    Store     │◄────│  decrypt     │                     │
│  └──────────────┘     └──────────────┘                     │
│                                                             │
│  Para encriptados: App necesita permisos en IAM + KMS      │
└─────────────────────────────────────────────────────────────┘
```

---

## 2. Jerarquía de Parámetros

```
┌─────────────────────────────────────────────────────────────┐
│  ESTRUCTURA EN PATHS (como carpetas)                        │
│                                                             │
│  /my-department/                                            │
│  └── my-app/                                                │
│      ├── dev/                                               │
│      │   ├── db-url                                        │
│      │   └── db-password                                   │
│      └── prod/                                              │
│          ├── db-url                                        │
│          └── db-password                                   │
│                                                             │
│  Beneficio: IAM policies por path                          │
│                                                             │
│  Ejemplo:                                                   │
│  • Dev Lambda → acceso a /my-app/dev/*                     │
│  • Prod Lambda → acceso a /my-app/prod/*                   │
└─────────────────────────────────────────────────────────────┘
```

---

## 3. Trucos Útiles

### Acceder a Secrets Manager desde Parameter Store

```
┌─────────────────────────────────────────────────────────────┐
│  REFERENCE A SECRETS MANAGER                                │
│                                                             │
│  Path especial:                                             │
│  /aws/reference/secretsmanager/my-secret                   │
│                                                             │
│  Permite acceder a secretos de Secrets Manager              │
│  usando la API de Parameter Store                           │
└─────────────────────────────────────────────────────────────┘
```

### Public Parameters (de AWS)

```
┌─────────────────────────────────────────────────────────────┐
│  PUBLIC PARAMETERS                                          │
│                                                             │
│  AWS publica parámetros útiles, ejemplo:                   │
│                                                             │
│  /aws/service/ami-amazon-linux-latest/amzn2-ami-hvm-x86_64 │
│                                                             │
│  Devuelve el AMI ID más reciente de Amazon Linux 2         │
│  en tu región. Siempre actualizado por AWS.                │
└─────────────────────────────────────────────────────────────┘
```

---

## 4. Parameter Tiers

| Característica | Standard | Advanced |
|---------------|----------|----------|
| **Tamaño máximo** | 4 KB | 8 KB |
| **Parameter Policies** | ❌ No | ✅ Sí |
| **Precio** | Gratis | $0.05/mes por parámetro |

---

## 5. Parameter Policies (Solo Advanced)

```
┌─────────────────────────────────────────────────────────────┐
│  PARAMETER POLICIES                                         │
│                                                             │
│  Asignar TTL (Time To Live) a parámetros                   │
│  Forzar actualización/eliminación de passwords             │
│                                                             │
│  Tipos:                                                     │
│                                                             │
│  1. EXPIRATION                                              │
│     "Borrar este parámetro en fecha X"                     │
│                                                             │
│  2. EXPIRATION NOTIFICATION                                 │
│     "Notificar 15 días antes de expirar"                   │
│     └── Notifica via EventBridge                           │
│                                                             │
│  3. NO CHANGE NOTIFICATION                                  │
│     "Notificar si no se actualiza en 20 días"              │
│     └── Detecta passwords estancados                       │
└─────────────────────────────────────────────────────────────┘
```

---

## Puntos Clave para el Examen

1. **Parameter Store** = configs y secretos, serverless, versionado
2. **Encriptación opcional** con KMS (necesitas permisos IAM + KMS)
3. **Jerarquía por paths** = simplifica IAM policies
4. **Public Parameters** = AMIs actualizados por AWS
5. **Standard vs Advanced** = 4KB vs 8KB, policies solo en Advanced
6. **Parameter Policies** = TTL, notificaciones via EventBridge

