# 7.5 Amazon ElastiCache

## Qué es
- Redis o Memcached gestionado por AWS
- Base de datos en memoria (muy rápida, baja latencia)
- Reduce carga en bases de datos (queries repetidas)
- **IMPORTANTE:** Requiere cambios en código de aplicación

## Casos de uso

### 1. DB Cache (Lazy Loading)
```
App → ElastiCache → Cache hit? → Sí → Devuelve data
                         │
                         No (cache miss)
                         │
                         ▼
                   Lee de RDS → Guarda en cache → Devuelve
```

### 2. Session Store (Stateless Apps)
```
User → ALB → EC2 (cualquiera)
              │
              ▼
         ElastiCache (sesión guardada)
              │
              ▼
         Todas las EC2 ven la misma sesión
```

## Redis vs Memcached (CAE EN EXAMEN)

| | Redis | Memcached |
|---|-------|-----------|
| Multi-AZ | ✅ Auto-failover | ❌ |
| Replicación | ✅ Read replicas | ❌ |
| Persistencia | ✅ AOF, backup/restore | ❌ Pierdes data si cae |
| Sharding | ✅ (cluster mode) | ✅ |
| Multi-thread | ❌ Single-thread | ✅ |
| Caso de uso | HA, durabilidad, como mini-RDS | Cache simple, efímero |

## Cómo recordar

```
Redis = RDS
  R de Replication
  Persistencia, backup, Multi-AZ, HA

Memcached = Memory temporal
  Sharding puro
  Si cae nodo, perdés esos datos
  Más simple, más efímero
```

## Para el examen

```
Cache con HA y persistencia      → Redis
Cache simple, datos efímeros     → Memcached
Session store stateless          → ElastiCache (cualquiera)
Reducir carga DB reads           → ElastiCache
Requiere cambios en app          → SÍ, siempre
```
