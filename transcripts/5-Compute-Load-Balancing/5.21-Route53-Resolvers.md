# 5.21 Route 53 - Resolvers (Hybrid DNS)

## Route 53 Resolver (default)
- Resuelve automáticamente:
  - DNS names de EC2 instances
  - Private Hosted Zones
  - Public DNS (internet)

## Hybrid DNS
Conectar DNS de AWS con DNS de on-premises (via VPN o Direct Connect)

## Resolver Endpoints

### Inbound Endpoint
- On-prem → AWS
- Permite que DNS resolvers externos consulten Route 53
- On-prem puede resolver `*.aws.private`

### Outbound Endpoint
- AWS → On-prem
- Permite que Route 53 consulte DNS resolvers externos
- AWS puede resolver `*.onprem.private`
- Requiere **Resolver Rules** (forwarding rules)

### Características
- 2 AZs para HA (2 ENIs)
- 10,000 queries/segundo por IP
- Se asocian a VPCs en la misma región

## Resolver Rules (para Outbound)

### Tipos
1. **Forwarding Rules** - dominio X → forward a IP Y
2. **System Rules** - override para NO usar forwarding en subdominios
3. **Auto-defined** - dominios internos AWS (compute.amazonaws.com, etc.)

### Prioridad
Si múltiples reglas matchean → la más específica gana

### Compartir
- Se pueden compartir con AWS RAM (Resource Access Manager)
- Gestión centralizada en una cuenta
