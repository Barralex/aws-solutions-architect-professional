# 5.23 Comparison of Solutions Architecture

## Resumen de arquitecturas Web/Compute

| Arquitectura | Escala | Velocidad | Costo | Cuándo usar |
|--------------|--------|-----------|-------|-------------|
| EC2 + Elastic IP | ❌ No | Rápido failover | Barato | IP estática, single instance |
| EC2 + Route53 | Medio | Lento (TTL) | Barato | DNS load balancing básico |
| ALB + ASG | ✅ Sí | Minutos | Medio | Web apps tradicionales |
| ALB + ECS/EC2 | ✅ Sí | Minutos | Medio | Docker, más control |
| ALB + Fargate | ✅ Sí | Rápido | Medio-Alto | Docker, sin gestión |
| ALB + Lambda | ✅ Sí | Muy rápido | Bajo | HTTP simple, híbrido |
| API GW + Lambda | ✅ Sí | Muy rápido | Variable | APIs, auth, caching |
| API GW + AWS Service | ✅ Sí | Muy rápido | Bajo | SQS/SNS directo, sin Lambda |
| API GW + ALB | ✅ Sí | Rápido | Medio | Features API GW + backend custom |

## Puntos clave

### EC2 + Elastic IP
- Failover moviendo EIP a otra instancia
- No escala, solo 1 instancia activa

### Route53 DNS Load Balancing
- TTL causa delays en failover
- Clientes pueden tener IPs viejas cacheadas

### ALB + ASG
- Clásico, escala bien
- Minutos para escalar (boot EC2)
- CPU target: 40-70%
- Pre-warm ALB si esperás picos

### ALB + ECS/EC2
- Dynamic port mapping (múltiples tasks por EC2)
- Complejo: 2 auto-scaling (ASG + ECS Service)

### ALB + Fargate
- Sin EC2, sin ASG
- Solo ECS Service auto-scaling
- Más rápido que EC2

### ALB + Lambda
- Más barato que API GW (10-20x)
- Sin features de API GW
- Se puede combinar con WAF

### API GW + Lambda
- Full features (auth, rate limit, cache, API keys)
- Cold start latency
- Límites: 10K req/s, 1K concurrent

### API GW + AWS Service (mejor que Lambda)
```
❌ API GW → Lambda → SQS (innecesario)
✅ API GW → SQS directo (más barato, menos latencia)
```
- Payload limit: 10MB

### API GW + HTTP backend
- API GW features sobre backend existente
- On-premise, ALB, third party
