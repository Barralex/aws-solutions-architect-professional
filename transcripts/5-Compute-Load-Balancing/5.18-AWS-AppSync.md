# 5.18 AWS AppSync

## TL;DR
AppSync = GraphQL managed de AWS (como Hasura pero de Amazon)

## Para el examen
- **GraphQL en la pregunta → AppSync**
- **Real-time API → AppSync** (WebSocket/MQTT)
- **Combinar múltiples data sources en una query → AppSync**

## Qué hace
- GraphQL managed
- Combina datos de: DynamoDB, Aurora, Elasticsearch, Lambda, HTTP APIs
- Real-time con WebSocket/MQTT
- Offline sync para mobile

## Arquitectura
```
Clientes (mobile/web) ──► AppSync ──► Resolvers ──► DynamoDB
                              │                  ──► Aurora
                              │                  ──► Lambda
                         GraphQL Schema          ──► HTTP APIs
```

## Auth con Cognito
- JWT token de Cognito
- Autorización por grupos en el schema

```graphql
type Query @aws_auth(cognito_groups: ["bloggers", "readers"]) {
  posts: [Post]
}

type Mutation @aws_auth(cognito_groups: ["bloggers"]) {
  addPost(title: String!): Post   # solo bloggers
}
```

## Regla mental
- GraphQL → AppSync
- Real-time + GraphQL → AppSync
- REST → API Gateway
