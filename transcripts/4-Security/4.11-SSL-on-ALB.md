# 4.11 Solution Architecture - SSL on ALB

**Curso:** AWS Solutions Architect Professional (SAP-C02)
**Sección:** 4 - Security
**Duración:** 3 min

---

## Resumen

Tres formas de manejar SSL: termination en ALB, SSL en EC2, o SSL offloading con CloudHSM.

---

## Opción 1: SSL Termination en ALB (clásico)

```
┌─────────────────────────────────────────────────────────────┐
│  User ──HTTPS──► ALB ──HTTP──► EC2                         │
│                   │                                         │
│                  ACM cert                                   │
│                                                             │
│  • Simple, escalable                                       │
│  • EC2 no gasta CPU en SSL                                 │
│  • Tráfico interno en HTTP (sin encrypt)                   │
└─────────────────────────────────────────────────────────────┘
```

## Opción 2: SSL en EC2

```
┌─────────────────────────────────────────────────────────────┐
│  User ──TCP──► NLB ──HTTPS──► EC2                          │
│                                  │                          │
│                          SSL cert en EC2                    │
│                          (desde SSM Parameter Store)        │
│                                                             │
│  • EC2 hace encrypt/decrypt (usa CPU)                      │
│  • Cert en EC2 = riesgo si alguien hace SSH               │
│  • Necesita IAM role para leer de SSM                      │
└─────────────────────────────────────────────────────────────┘
```

## Opción 3: CloudHSM SSL Offloading (más seguro)

```
┌─────────────────────────────────────────────────────────────┐
│  User ──TCP──► NLB ──HTTPS──► EC2 ──► CloudHSM             │
│                                           │                 │
│                              SSL acceleration               │
│                              (private key en HSM)           │
│                                                             │
│  • Private key NUNCA sale del HSM                          │
│  • EC2 no gasta CPU en SSL                                 │
│  • Soportado por NGINX, Apache, IIS                        │
│  • Cryptographic User (CU) en CloudHSM                     │
└─────────────────────────────────────────────────────────────┘
```

---

## Puntos Clave para el Examen

1. **ALB + ACM** = lo más simple, SSL termination en el LB
2. **NLB + SSL en EC2** = cert desde SSM, EC2 gasta CPU
3. **CloudHSM offloading** = private key nunca sale del HSM
4. **Más seguro** = CloudHSM (key aislada)

