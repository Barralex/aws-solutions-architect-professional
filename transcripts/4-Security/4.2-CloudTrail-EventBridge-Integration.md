# 4.2 CloudTrail - EventBridge Integration

## Resumen
Integración clave entre CloudTrail y Amazon EventBridge para interceptar cualquier llamada API y crear alertas en tiempo real.

---

## Concepto Principal

### CloudTrail + EventBridge = Alertas en Tiempo Real

```
┌─────────────────────────────────────────────────────────────┐
│  CLOUDTRAIL + EVENTBRIDGE                                   │
│                                                             │
│  API Call (cualquiera)                                      │
│        │                                                    │
│        ▼                                                    │
│  ┌──────────────┐                                          │
│  │  CloudTrail  │ ← Registra TODA API call                 │
│  └──────┬───────┘                                          │
│         │                                                   │
│         │  Todas las API calls aparecen                    │
│         │  como eventos en EventBridge                     │
│         ▼                                                   │
│  ┌──────────────┐                                          │
│  │ EventBridge  │ ← Crear REGLA para API específica        │
│  │   (regla)    │                                          │
│  └──────┬───────┘                                          │
│         │                                                   │
│         ▼                                                   │
│  ┌──────────────┐                                          │
│  │   Destino:   │                                          │
│  │  SNS / SQS   │ → Notificaciones                         │
│  │   Lambda     │ → Automatización                         │
│  └──────────────┘                                          │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## Ejemplos de APIs a Monitorear

| API | Servicio | Caso de uso |
|-----|----------|-------------|
| **DeleteTable** | DynamoDB | Alerta cuando borran tabla |
| **AssumeRole** | IAM | Detectar quién asume roles |
| **AuthorizeSecurityGroupIngress** | EC2 | Cambios en Security Groups |
| **TerminateInstances** | EC2 | Instancias terminadas |
| **DeleteBucket** | S3 | Buckets eliminados |

---

## Para el Examen

1. **EventBridge** = forma MÁS RÁPIDA de reaccionar a eventos de CloudTrail
2. **Todas las API calls** de CloudTrail aparecen en EventBridge
3. **Crear regla** en EventBridge para filtrar API específica
4. **Destinos:** SNS (alertas), SQS (cola), Lambda (automatización)

---

*Siguiente: 4.3 CloudTrail - SA Pro*
