# 5.20 Route 53 - Routing Policies (Part 2)

## Hosted Zones

### Public Hosted Zone
- Resuelve dominios públicos desde internet
- Targets: IPs públicas, ALB público, CloudFront, S3 website

### Private Hosted Zone
- Solo resuelve desde dentro de VPCs
- Targets: IPs privadas de EC2, RDS, etc.
- Requiere en VPC:
  - `enableDnsHostnames = true`
  - `enableDnsSupport = true`

## DNSSEC
- Protocolo para verificar integridad y origen de DNS
- Protege contra Man-in-the-Middle attacks
- Solo funciona con Public Hosted Zones

## 3rd Party Registrar
- Comprás dominio afuera (GoDaddy, etc.)
- Usás Route 53 como DNS
- Actualizás NS records en el registrar → apuntan a AWS

## Health Checks

### 3 Tipos
1. **Monitor Endpoint** - HTTP request a tu app/server
2. **Calculated** - Combina otros health checks (AND, OR, NOT)
3. **CloudWatch Alarm** - Basado en métricas/alarmas

### Monitor Endpoint
- ~15 health checkers globales
- Pasa si responde 2xx o 3xx
- Puede validar texto en primeros 5120 bytes
- Solo endpoints PÚBLICOS

### Calculated Health Checks
- Combina hasta 256 child health checks
- Define cuántos deben pasar para que el parent pase
- Útil para maintenance sin triggear failover total

### Health Check de Recursos Privados
```
EC2 privada → CloudWatch Metric → CloudWatch Alarm → Health Check
```
No podés hacer health check directo porque los checkers son externos a tu VPC.

## Arquitectura: Multi-Region RDS Failover

```
us-east-1 (primary)              us-west-2 (DR)
    RDS ─────async replica─────► RDS (read replica)
     │
CloudWatch Alarm
     │
Health Check
     │
     ▼ (si falla)
SNS/EventBridge → Lambda → Actualiza Route 53
                         → Promueve Read Replica
```
