# 3.6 AWS Organizations

## Resumen
AWS Organizations permite gestionar múltiples cuentas AWS desde una cuenta central de administración. Utiliza una estructura jerárquica de OUs (Organizational Units) y un rol especial (OrganizationAccountAccessRole) para la administración cross-account.

---

## Conceptos Clave

### 1. Estructura de Organizations
```
Root OU
├── Management Account (cuenta de gestión)
├── Dev OU
│   ├── Member Account 1
│   └── Member Account 2
├── Prod OU
│   ├── Member Account 3
│   └── HR OU (OUs anidadas)
│       └── Member Account 4
└── Finance OU
    └── Member Account 5
```

**Dos tipos de cuentas:**
- **Management Account**: Administra toda la organización
- **Member Accounts**: Cuentas normales que forman parte de la org

### 2. OrganizationAccountAccessRole

**El rol mágico de Organizations:**
- Se crea AUTOMÁTICAMENTE cuando creas una cuenta nueva via API de Organizations
- Otorga permisos de admin completos en la cuenta miembro
- La Management Account usa AssumeRole para administrar cuentas miembro

**Importante para el examen:**
- Si INVITAS una cuenta existente → debes crear el rol MANUALMENTE
- Si CREAS la cuenta desde Organizations → se crea automáticamente

### 3. Estrategias Multi-Cuenta

**Razones para múltiples cuentas:**
- Por departamento
- Por centro de costos
- Por entorno (dev/test/prod)
- Por restricciones regulatorias
- Mejor aislamiento de recursos
- Límites de servicio separados
- Cuenta separada para logging

**Tipos de OUs:**
- Business Unit (por unidad de negocio)
- Environment (dev/test/prod)
- Project (por proyecto)

### 4. Feature Modes (Modos de Características)

| Modo | Características |
|------|-----------------|
| **Consolidated Billing** | Facturación agregada, método de pago único, descuentos por volumen |
| **All Features** | Todo lo anterior + SCPs (Service Control Policies) |

**Importante:**
- Cuentas invitadas deben aprobar "All Features"
- Una vez habilitado All Features, NO puedes volver a solo Consolidated Billing
- Con All Features puedes usar SCP para evitar que cuentas salgan de la org

### 5. Reserved Instances y Savings Plans

**Compartición de RI/Savings Plans:**
- Facturación consolidada trata TODAS las cuentas como UNA
- Cualquier cuenta puede beneficiarse de RIs compradas por otra
- La Management Account puede DESACTIVAR el sharing por cuenta

**Para que se compartan RIs entre dos cuentas:**
- AMBAS cuentas deben tener sharing ACTIVADO

### 6. Mover Cuentas Entre Organizaciones

**Proceso simplificado:**
1. Enviar invitación desde la nueva organización
2. Aceptar invitación desde la cuenta miembro
3. La cuenta se mueve automáticamente

*Ya NO es necesario eliminar la cuenta de la org anterior primero.*

---

## Para el Examen

1. **OrganizationAccountAccessRole** se crea AUTO solo si creas cuenta via API
2. **Cuenta invitada** = crear rol manualmente
3. **All Features** no es reversible a solo Consolidated Billing
4. **RI sharing** requiere activación en AMBAS cuentas
5. **SCPs** solo disponibles con All Features
6. **Mover cuentas** = solo invitación + aceptación

---

## Diagrama: OrganizationAccountAccessRole

```
┌─────────────────────┐         AssumeRole          ┌─────────────────────┐
│  Management Account │ ─────────────────────────►  │   Member Account    │
│                     │                             │                     │
│  (cuenta gestión)   │                             │  OrganizationAccess │
│                     │ ◄───────────────────────    │       Role          │
└─────────────────────┘    Permisos Admin Full      └─────────────────────┘
```

---

*Siguiente: 3.7 AWS Organizations Policies (SCPs)*
