# 6.1 EBS & Local Instance Store

## EBS Volumes

### Características básicas
- Network drive (no físico)
- Attached a 1 instancia (excepto multi-attach)
- Ligado a una AZ específica
- Para mover entre AZs: snapshot → restore

### Volume Types
| Tipo | Uso | Max IOPS |
|------|-----|----------|
| gp2/gp3 | General purpose SSD | 16,000 |
| io1/io2 | High performance (DBs) | 64,000 |
| io2 Block Express | Extreme performance | 256,000 |
| st1 | Throughput HDD (big data) | 500 |
| sc1 | Cold HDD (archival) | 250 |

**Boot volumes:** Solo gp2/gp3 o io1/io2

### Snapshots
- Incrementales (solo bloques cambiados)
- Usan IO → puede afectar performance
- Se guardan en S3 (no visible)
- Se pueden copiar cross-region (DR)
- Recomendado: detach antes de snapshot

### Fast Snapshot Restore (FSR)
- Pre-warms el snapshot
- Sin FSR: tenés que leer todo el volumen (fio/dd)

### Data Lifecycle Manager (DLM)
- Automatiza snapshots y AMIs
- Basado en tags (ej: environment=prod)
- Diferente de AWS Backup (DLM = solo EBS, Backup = todo)

### EBS Encryption
- Setting a nivel de cuenta (por región)
- Por defecto: NO encrypted
- Se puede habilitar para auto-encrypt nuevos volumes

### EBS Multi-Attach
- Solo io1/io2
- Mismo volume → múltiples EC2 (misma AZ)
- Requiere cluster-aware filesystem
- Caso: Teradata, apps con concurrent writes

## EC2 Instance Store

### Qué es
- Disco FÍSICO attached al server
- Ephemeral (se pierde si stop/terminate)
- Sobrevive reboot

### Cuándo usar
- Millones de IOPS necesarios
- Buffer, cache, scratch data, temp content
- Datos que podés perder

### Comparación
| | EBS | Instance Store |
|---|-----|----------------|
| Tipo | Network | Physical |
| Persistente | ✅ Sí | ❌ No |
| Max IOPS | 256K (io2 BE) | Millones |
| Resize | ✅ Sí | ❌ No |
| Survives stop | ✅ Sí | ❌ No |
