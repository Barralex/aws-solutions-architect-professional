# 7.6 Handling Extreme Rates

## Concepto clave
Cuanto mÃ¡s a la derecha (mÃ¡s profundo en la arquitectura), mÃ¡s caro y mÃ¡s latencia.
**Cachear lo mÃ¡s temprano posible.**

## LÃ­mites por capa

### Edge / Entry
| Servicio | Capacidad | Cache |
|----------|-----------|-------|
| Route 53 | Ilimitado (DNS global) | âœ… Cliente |
| CloudFront | 100,000+ rps | âœ… Edge |
| ALB | Escala masivamente | âŒ |
| API Gateway | 10,000 rps (soft limit) | âœ… |

### Compute
| Servicio | Escalado | Velocidad |
|----------|----------|-----------|
| ASG / ECS on EC2 | Lento (boot VMs) | ğŸ¢ |
| Fargate | MÃ¡s rÃ¡pido (containers) | ğŸ‡ |
| Lambda | 1,000 concurrent (soft limit) | âš¡ |

### Database
| Servicio | Escalado |
|----------|----------|
| RDS / Aurora | Provisioned, difÃ­cil escalar |
| DynamoDB | Auto-scaling / On-demand âœ… |

### Cache Layer
| Servicio | LÃ­mite |
|----------|--------|
| Redis | Hasta 200 nodos |
| Memcached | Hasta 20 nodos |
| DAX (DynamoDB) | Hasta 10 nodos |

### Storage
| Servicio | IOPS | Cache local |
|----------|------|-------------|
| EBS gp2 | 16,000 | âœ… |
| EBS io1/io2 | 64,000 | âœ… |
| Instance Store | Millones | âœ… |
| EFS | General o Max IO/Provisioned | - |

### Decoupling
| Servicio | Capacidad |
|----------|-----------|
| SNS / SQS Standard | PrÃ¡cticamente ilimitado |
| SQS FIFO | 3,000 rps (batch) / 300 rps (sin batch) |
| Kinesis | 1 MB/s in, 2 MB/s out por shard |

### S3
```
3,500 PUT / 5,500 GET por prefijo por segundo
KMS limit: ~10,000 API calls por regiÃ³n (si usÃ¡s SSE-KMS)
```

## Diagrama mental

```
BARATO / RÃPIDO                              CARO / LENTO
â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º

Route53 â†’ CloudFront â†’ ALB/APIGW â†’ Compute â†’ Cache â†’ DB â†’ Storage
   â”‚           â”‚           â”‚                   â”‚
   â””â”€â”€ CACHE â”€â”€â”´â”€â”€ CACHE â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Cachear acÃ¡ = menos requests allÃ¡ â†’
```

## Para el examen

```
"Extreme rates" + S3 con KMS       â†’ KMS es el bottleneck (~10K/s)
"Extreme rates" + FIFO ordering    â†’ SQS FIFO limit 3K rps
"Faster scaling" compute           â†’ Lambda o Fargate (no EC2)
"Reduce DB load"                   â†’ ElastiCache o DAX
"Millions of IOPS"                 â†’ Instance Store
```
