# 6.8 Amazon FSx - Solution Architecture

## Migrar FSx Windows: Single-AZ → Multi-AZ

No hay upgrade directo. Dos opciones:

### Opción 1: DataSync (sin downtime)
```
FSx Single-AZ ──DataSync──► FSx Multi-AZ (nuevo)
     │                           │
     └── sigue funcionando ──────┘
         mientras sincroniza

Cuando termina → migrar app al nuevo
```
- Más lento
- Sin downtime

### Opción 2: Backup & Restore (con downtime)
```
FSx Single-AZ → Backup → Apagar → Restore → FSx Multi-AZ
```
- Más rápido
- Con downtime

## Reducir tamaño de FSx

**NO se puede reducir.** Solo aumentar.

Backup + Restore = mismo tamaño o mayor.

### Solución:
```
FSx 2TB ──DataSync──► FSx 1TB (nuevo, más chico)
   │                      │
   └── app usa este ──────┘
       cuando termina sync
```

## FSx Lustre: Lazy Loading

Con S3 como source, NO descarga todo el dataset.

```
S3 (petabytes)
      │
      ▼
FSx Lustre ◄── Cliente pide archivo X
      │
      └── Solo descarga X, no todo S3
```

**Beneficios:**
- Empezás a trabajar inmediato (no esperás descarga completa)
- Menos costo (solo lo que usás)
- Data se cachea (segunda vez no descarga)

## Reglas para examen

```
Migrar Single→Multi AZ  → DataSync (sin downtime) o Backup (con downtime)
Reducir tamaño FSx      → NO se puede, crear nuevo + DataSync
Lustre + S3 petabytes   → Lazy loading, empieza inmediato
```
