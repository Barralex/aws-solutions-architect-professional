# 4.10 CloudHSM

**Curso:** AWS Solutions Architect Professional (SAP-C02)
**Sección:** 4 - Security
**Duración:** 5 min

---

## Resumen

CloudHSM = Hardware dedicado para encryption. VOS gestionás las claves (no AWS). Tamper resistant. Mínimo 2 HSMs en diferentes AZs para HA.

---

## KMS vs CloudHSM

```
┌─────────────────────────────────────────────────────────────┐
│  KMS                          CloudHSM                      │
│  ───                          ────────                      │
│  AWS gestiona software        AWS da hardware, vos el resto │
│  Multi-tenant                 Single-tenant (dedicado)      │
│  IAM para permisos            Usuarios propios en el HSM    │
│  HA incluida                  Vos armás el cluster (2+ AZs) │
│  Free tier                    No free tier                  │
└─────────────────────────────────────────────────────────────┘
```

## Lo que AWS hace vs lo que vos hacés

```
┌─────────────────────────────────────────────────────────────┐
│  AWS:                                                       │
│  • Provisiona el hardware                                  │
│  • IAM para create/describe/delete cluster                 │
│  • Nada más                                                │
│                                                             │
│  VOS:                                                       │
│  • Gestionás las claves (create, update, delete)           │
│  • Gestionás los usuarios del HSM                          │
│  • Seguridad, mantenimiento, backups                       │
│  • Si perdés las claves, AWS NO puede recuperarlas         │
└─────────────────────────────────────────────────────────────┘
```

## High Availability

```
┌─────────────────────────────────────────────────────────────┐
│  MÍNIMO 2 HSMs EN DIFERENTES AZs                           │
│                                                             │
│       AZ-a              AZ-b                                │
│    ┌───────┐         ┌───────┐                             │
│    │  HSM  │◄───────►│  HSM  │  cluster                    │
│    └───────┘         └───────┘                             │
│        ▲                 ▲                                  │
│        │                 │                                  │
│        └────────┬────────┘                                  │
│                 │                                           │
│          CloudHSM Client                                    │
└─────────────────────────────────────────────────────────────┘
```

## Casos de Uso

```
┌─────────────────────────────────────────────────────────────┐
│  • SSE-C para S3 (generar claves para server-side encrypt) │
│  • SSL/TLS offloading                                      │
│  • Redshift encryption                                     │
│  • Oracle TDE                                               │
│  • Cualquier cosa que requiera FIPS 140-2 Level 3          │
└─────────────────────────────────────────────────────────────┘
```

---

## Puntos Clave para el Examen

1. **CloudHSM** = hardware dedicado, single-tenant
2. **VOS gestionás TODO** (claves, usuarios, backups)
3. **AWS NO puede recuperar** tus claves si las perdés
4. **HA** = mínimo 2 HSMs en diferentes AZs
5. **No free tier**
6. **CloudHSM Client Software** para acceder (no API)

